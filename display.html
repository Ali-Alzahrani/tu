function checkPermissionStatus() {
    let allowedTimeString = entryData.allowedTime;

    // ðŸŒŸ Ensure compatibility with Safari
    if (allowedTimeString.includes("T")) {
        allowedTimeString = allowedTimeString.replace("T", " "); // Replace 'T' with space
    }

    let allowedTime = new Date(allowedTimeString);
    
    // ðŸ”´ SAFARI FIX: If date parsing fails, try another format
    if (isNaN(allowedTime.getTime())) {
        allowedTime = new Date(allowedTimeString.replace(/-/g, "/")); // Convert 'YYYY-MM-DD' to 'YYYY/MM/DD'
    }

    const durationHours = parseInt(entryData.duration);
    const expirationTime = new Date(allowedTime.getTime() + durationHours * 60 * 60 * 1000);
    const currentTime = new Date();

    console.log("Allowed Time:", allowedTime); // Debug logs
    console.log("Duration (hours):", durationHours);
    console.log("Expiration Time:", expirationTime);
    console.log("Current Time:", currentTime);

    const statusMessage = document.getElementById("statusMessage");

    if (currentTime < allowedTime) {
        statusMessage.innerHTML = "Permission has not started yet";
        statusMessage.style.color = "orange";
        container.style.backgroundColor = "#f1c40f"; // Yellow
    } else if (currentTime >= allowedTime && currentTime <= expirationTime) {
        statusMessage.innerHTML = "They are allowed";
        statusMessage.style.color = "green";
        container.style.backgroundColor = "#2ecc71"; // Green
    } else {
        statusMessage.innerHTML = "Permission has expired";
        statusMessage.style.color = "red";
        container.style.backgroundColor = "#e74c3c"; // Red
    }
}
